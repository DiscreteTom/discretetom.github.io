(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{1360:function(_,v){const e={render:function(){var _=this;_.$createElement;return _._self._c,_._m(0)},staticRenderFns:[function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("div",{staticClass:"frontmatter-markdown"},[e("h2",{attrs:{id:"预备知识"}},[_._v("预备知识")]),_._v(" "),e("h3",{attrs:{id:"正则语言-正则文法-正则集和正则式"}},[_._v("正则语言、正则文法、正则集和正则式")]),_._v(" "),e("p",[_._v("正则文法（3型文法）"),e("strong",[_._v("包括两种")]),_._v("：")]),_._v(" "),e("ul",[e("li",[_._v("右线性文法(Right-linear Grammar)\n"),e("ul",[e("li",[_._v("生成式左侧为一个非终结符，右侧为终结符串（可以为空）或终结符后接"),e("strong",[_._v("一个")]),_._v("非终结符")])])]),_._v(" "),e("li",[_._v("左线性文法(Left-linear Grammar)\n"),e("ul",[e("li",[_._v("生成式左侧为一个非终结符，右侧为终结符串（可以为空）或"),e("strong",[_._v("一个")]),_._v("非终结符后接一个终结符串")])])])]),_._v(" "),e("blockquote",[e("p",[_._v("所以不要记成 "),e("s",[e("strong",[_._v("正则文法等于右线性文法")])]),_._v(" ，应该是"),e("strong",[_._v("正则文法包含右线性文法")])])]),_._v(" "),e("p",[_._v("正则语言、正则文法、正则集、正则式的关系：")]),_._v(" "),e("ul",[e("li",[_._v("正则语言可以用正则文法定义，也可以用正则式定义")]),_._v(" "),e("li",[_._v("每个正则文法都有一个正则式与之一一对应，反之亦然")]),_._v(" "),e("li",[_._v("正则集为正则文法或正则式定义的语言的集合（通常可以写成串的集合")])]),_._v(" "),e("h3",{attrs:{id:"状态转换图"}},[_._v("状态转换图")]),_._v(" "),e("p",[_._v("起始状态有一个无源箭头，终止状态为两个圈。详见形式语言与自动机")]),_._v(" "),e("h2",{attrs:{id:"词法分析程序做什么"}},[_._v("词法分析程序做什么")]),_._v(" "),e("ul",[e("li",[_._v("从源文件中分析出各类符号")]),_._v(" "),e("li",[_._v("词法检查，防止词法错误")]),_._v(" "),e("li",[_._v("创建符号表")]),_._v(" "),e("li",[_._v("跳过注释和空白")])]),_._v(" "),e("h2",{attrs:{id:"符号类型"}},[_._v("符号类型")]),_._v(" "),e("p",[_._v("以C语言为例")]),_._v(" "),e("ul",[e("li",[_._v("标识符")]),_._v(" "),e("li",[_._v("关键字")]),_._v(" "),e("li",[_._v("运算符")]),_._v(" "),e("li",[_._v("界符\n"),e("ul",[e("li",[_._v("如小括号、大括号")]),_._v(" "),e("li",[_._v("注意中括号应该是下标运算符")])])]),_._v(" "),e("li",[_._v("字面量")]),_._v(" "),e("li",[_._v("注释")])]),_._v(" "),e("h2",{attrs:{id:"输入"}},[_._v("输入")]),_._v(" "),e("h3",{attrs:{id:"概述"}},[_._v("概述")]),_._v(" "),e("p",[_._v("输入串一般放在一个缓冲区中，即输入缓冲区。词法分析工作在这个缓冲区中进行。")]),_._v(" "),e("p",[_._v("输入部分有多种模型候选：")]),_._v(" "),e("ul",[e("li",[_._v("双指针单缓冲区")]),_._v(" "),e("li",[_._v("双指针配对缓冲区")]),_._v(" "),e("li",[_._v("保存子串")])]),_._v(" "),e("h3",{attrs:{id:"双指针单缓冲区"}},[_._v("双指针单缓冲区")]),_._v(" "),e("p",[e("strong",[_._v("不保存当前已分析的子串")]),_._v("，而是使用两个指针一个指向子串首（开始指针），一个指向字串尾（向前指针或搜索指针）。")]),_._v(" "),e("p",[_._v("如分析"),e("code",{pre:!0},[_._v("while (1) for (;;) break;")]),_._v("语句，分析到"),e("code",{pre:!0},[_._v("for")]),_._v("时，一个指针指向"),e("code",{pre:!0},[_._v("f")]),_._v("，另一个指针向前搜索，搜索到空格之后判定当前子串为关键字"),e("code",{pre:!0},[_._v("for")]),_._v("。")]),_._v(" "),e("p",[e("strong",[_._v("要求")]),_._v("："),e("strong",[_._v("任何符号长度不能超过缓冲区长度")])]),_._v(" "),e("p",[_._v("但是这个限制仍然不够，比如以下问题：读到词串"),e("code",{pre:!0},[_._v("for")]),_._v("之后读到了缓冲区尾，有如下两种情况：")]),_._v(" "),e("ul",[e("li",[e("code",{pre:!0},[_._v("for")]),_._v("后面紧挨着其他字母或数字形成"),e("code",{pre:!0},[_._v("forXX")]),_._v("，为标识符")]),_._v(" "),e("li",[e("code",{pre:!0},[_._v("for")]),_._v("后面是空白符或括号"),e("code",{pre:!0},[_._v("(")]),_._v("，所以"),e("code",{pre:!0},[_._v("for")]),_._v("是关键字")])]),_._v(" "),e("p",[_._v("也就是"),e("strong",[_._v("符号被缓冲区边界切断")]),_._v("的问题")]),_._v(" "),e("p",[_._v("此时需要刷新缓冲区，加载下一批字符来向前读取。那么开始指针就会失效。")]),_._v(" "),e("p",[_._v("解决方案：使用双指针+配对缓冲区或者保存子串")]),_._v(" "),e("h3",{attrs:{id:"双指针配对缓冲区技术"}},[_._v("双指针+配对缓冲区技术")]),_._v(" "),e("p",[_._v("解决的问题：符号被缓冲区边界切断时，为了判断某个单词的词性，需要"),e("strong",[_._v("超前扫描和回退")])]),_._v(" "),e("p",[_._v("设置两个指针：")]),_._v(" "),e("ul",[e("li",[_._v("开始指针 - 记录词首")]),_._v(" "),e("li",[_._v("向前指针（搜索指针） - 搜索词尾")])]),_._v(" "),e("p",[e("strong",[_._v("配对缓冲区")]),_._v("策略：把一个缓冲区分成大小相同的两半，一次加载一半，防止回退时再次加载上一个缓冲区。")]),_._v(" "),e("p",[e("strong",[_._v("要求")]),_._v("："),e("strong",[_._v("任何符号的长度都不能超过配对缓冲区整体的长度")])]),_._v(" "),e("h2",{attrs:{id:"输出记号"}},[_._v("输出记号")]),_._v(" "),e("p",[_._v("输出通常是二元组token："),e("code",{pre:!0},[_._v("<class, value>")])]),_._v(" "),e("p",[_._v("关键字、运算符、界符的记号设置方式可以是"),e("strong",[_._v("一符一种")]),_._v("（每个符号一个class，没有value，直接使用class区分），也可以是"),e("strong",[_._v("一类一种")]),_._v("（把一类符号设置为一个class，使用value区分）。如赋值运算符类：")]),_._v(" "),e("table",[e("thead",[e("tr",[e("th",[_._v("赋值运算符")]),_._v(" "),e("th",[_._v("按照一符一种设置记号")]),_._v(" "),e("th",[_._v("按照一类一种设置记号")])])]),_._v(" "),e("tbody",[e("tr",[e("td",[e("code",{pre:!0},[_._v("=")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, ->")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, =>")])])]),_._v(" "),e("tr",[e("td",[e("code",{pre:!0},[_._v("+=")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_add_assign, ->")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, +=>")])])]),_._v(" "),e("tr",[e("td",[e("code",{pre:!0},[_._v("-=")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_minus_assign, ->")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, -=>")])])]),_._v(" "),e("tr",[e("td",[e("code",{pre:!0},[_._v("*=")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_multiple_assign, ->")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, *=>")])])]),_._v(" "),e("tr",[e("td",[e("code",{pre:!0},[_._v("/=")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_divide_assign, ->")])]),_._v(" "),e("td",[e("code",{pre:!0},[_._v("<op_assign, /=>")])])])])]),_._v(" "),e("p",[_._v("两种方案都可以用，视情况而定。")])])}]};_.exports={attributes:{layout:"collection",title:"词法分析",collection:"FundamentalsOfCompiling"},vue:{render:e.render,staticRenderFns:e.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(_){return this.templateRender?this.templateRender():_("div","Rendering")},created:function(){this.templateRender=e.render,this.$options.staticRenderFns=e.staticRenderFns}}}}}}]);