(window.webpackJsonp=window.webpackJsonp||[]).push([[78,256,257],{1145:function(t,n,e){const r={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"frontmatter-markdown"},[r("h2",{attrs:{id:"先给结论"}},[t._v("先给结论")]),t._v(" "),r("p",[t._v("实现窗口置顶代码")]),t._v(" "),r("pre",{staticClass:"language-cpp"},[r("code",{pre:!0,attrs:{class:"language-cpp"}},[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WindowStaysOnTopHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),r("p",[t._v("取消窗口置顶代码")]),t._v(" "),r("pre",{staticClass:"language-cpp"},[r("code",{pre:!0,attrs:{class:"language-cpp"}},[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WindowStaysOnTopHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//add a '!' compared with the upper one")]),t._v("\n")])]),t._v(" "),r("p",[t._v("执行上述两段代码后窗口会隐藏，需要手动调用show()")]),t._v(" "),r("p",[t._v("所以如果不想因为改变窗口置顶状态而隐藏/显示窗口，需要如下代码")]),t._v(" "),r("pre",{staticClass:"language-cpp"},[r("code",{pre:!0,attrs:{class:"language-cpp"}},[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//set Window Stay On Top")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("isHidden")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("hide")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WindowStaysOnTopHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WindowStaysOnTopHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),r("h2",{attrs:{id:"过程"}},[t._v("过程")]),t._v(" "),r("p",[t._v("参考了网上的很多博客，得到的结论基本一致，使用如下代码实现窗口置顶")]),t._v(" "),r("pre",{staticClass:"language-cpp"},[r("code",{pre:!0,attrs:{class:"language-cpp"}},[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("WindowStaysOnTopHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),r("p",[t._v("但是取消窗口置顶，网上的说法就不一致了。我查到的是以下两种")]),t._v(" "),r("pre",{staticClass:"language-cpp"},[r("code",{pre:!0,attrs:{class:"language-cpp"}},[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("CustomizeWindowHint"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWindowFlags")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Qt"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Widget"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),r("p",[t._v("使用前者效果，取消置顶前:")]),t._v(" "),r("p",[r("img",{attrs:{src:e(413),alt:"5-1"}})]),t._v(" "),r("p",[t._v("取消置顶后:")]),t._v(" "),r("p",[r("img",{attrs:{src:e(414),alt:"5-2"}})]),t._v(" "),r("p",[t._v("可以发现标题栏消失了")]),t._v(" "),r("p",[t._v("使用后者，可以成功取消置顶")]),t._v(" "),r("p",[t._v("查阅Qt内置Help可以发现Qt::Widget的描述如下")]),t._v(" "),r("blockquote",[r("p",[t._v("This is the default type for QWidget. Widgets of this type are child widgets if they have a parent, and independent windows if they have no parent. See also Qt::Window and Qt::SubWindow.")])]),t._v(" "),r("p",[t._v("简单来说是将窗口的Flags设置为QWidget的初始值")]),t._v(" "),r("p",[t._v("感觉这样做不保险，此方案可能会清除其他设置内容")]),t._v(" "),r("p",[t._v("所以似乎我的方案最优的样子:)")]),t._v(" "),r("p",[t._v("参考:")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://blog.csdn.net/killua_hzl/article/details/5288769"}},[t._v("Qt编程技巧 窗口置顶")])]),t._v(" "),r("li",[r("a",{attrs:{href:"http://blog.csdn.net/dongpanshan/article/details/17612655"}},[t._v("qt 如何让窗口置顶")])]),t._v(" "),r("li",[r("a",{attrs:{href:"http://blog.sina.com.cn/s/blog_8a3023730100v507.html"}},[t._v("Qt设置窗口置顶")])])])])}]};t.exports={attributes:{title:"QT设置与取消窗口置顶",date:"2018-03-21T00:00:00.000Z",tags:["qt"]},vue:{render:r.render,staticRenderFns:r.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=r.render,this.$options.staticRenderFns=r.staticRenderFns}}}}},413:function(t,n,e){t.exports=e.p+"img/03d7cbf.png"},414:function(t,n,e){t.exports=e.p+"img/2eee55b.png"}}]);