(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{1247:function(e,v){const t={render:function(){var e=this;e.$createElement;return e._self._c,e._m(0)},staticRenderFns:[function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("div",{staticClass:"frontmatter-markdown"},[t("h2",{attrs:{id:"前言"}},[e._v("前言")]),e._v(" "),t("p",[e._v("本文是观看"),t("a",{attrs:{href:"https://www.bilibili.com/video/BV1g4411Y7Y4/"}},[e._v("此视频")]),e._v("时的笔记")]),e._v(" "),t("h2",{attrs:{id:"前置知识"}},[e._v("前置知识")]),e._v(" "),t("ul",[t("li",[e._v("类型\n"),t("ul",[t("li",[e._v("在线破解\n"),t("ul",[t("li",[e._v("不断访问线上服务进行尝试实现破解")])])]),e._v(" "),t("li",[e._v("离线破解\n"),t("ul",[t("li",[e._v("访问密码文件并解析哈希进行破解")])])])])]),e._v(" "),t("li",[e._v("破解能力取决于字典大小")])]),e._v(" "),t("h2",{attrs:{id:"hydra"}},[e._v("Hydra")]),e._v(" "),t("ul",[t("li",[e._v("世界顶级密码暴力破解工具")]),e._v(" "),t("li",[e._v("支持几乎所有协议")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-l")]),e._v("指定用户名\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("-p")]),e._v("指定密码")])])]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-L")]),e._v("指定用户名文件\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("-P")]),e._v("指定密码文件")])])]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-M")]),e._v("指定目标主机文件")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-o")]),e._v("输出到文件")])]),e._v(" "),t("p",[e._v("示例：")]),e._v(" "),t("pre",{staticClass:"language-bash"},[t("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("hydra -l user -P list.txt ftp://1.1.1.1\nhydra -L list.txt -p xxx imap://1.1.1.1/xx\nhydra -l root -P list.txt "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ssh")]),e._v("\n")])]),e._v(" "),t("h2",{attrs:{id:"medusa"}},[e._v("Medusa")]),e._v(" "),t("ul",[t("li",[e._v("速度快")]),e._v(" "),t("li",[e._v("大规模并行")]),e._v(" "),t("li",[e._v("模块化")]),e._v(" "),t("li",[e._v("爆破登录")]),e._v(" "),t("li",[e._v("稳定性比 Hydra 强，模块比 Hydra 少")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-h")]),e._v("目标主机\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("-H")]),e._v("目标主机文件")])])]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-u")]),e._v("用户名\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("-U")]),e._v("用户名文件")])])]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-p")]),e._v("密码\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("-P")]),e._v("密码文件")])])]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-t")]),e._v("指定线程")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-d")]),e._v("显示所有模块")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-M")]),e._v("指定模块")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-m")]),e._v("指定模块参数")])]),e._v(" "),t("pre",{staticClass:"language-bash"},[t("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("medusa -M "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ssh")]),e._v(" -h "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(".1.1 -u root -P list.txt\n")])]),e._v(" "),t("h2",{attrs:{id:"patator"}},[e._v("Patator")]),e._v(" "),t("ul",[t("li",[e._v("强大的命令行暴力破解器")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-h")]),e._v("显示可用模块")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("patator ssh_login --help")]),e._v("查看帮助")])]),e._v(" "),t("pre",{staticClass:"language-bash"},[t("code",{pre:!0,attrs:{class:"language-bash"}},[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# password=FILE0 指定0号文件为密码")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 0=list.txt 指定0号文件")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# -x ignore:mesg='Authentication Failed.' 忽略失败的输出")]),e._v("\npatator ssh_login "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("root "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("FILE0 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("list.txt -x ignore:mesg"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Authentication Failed.'")]),e._v("\n")])]),e._v(" "),t("h2",{attrs:{id:"brutespray"}},[e._v("BrutesPray")]),e._v(" "),t("ul",[t("li",[e._v("基于 nmap 扫描端口，然后使用 Medusa 进行爆破")]),e._v(" "),t("li",[e._v("先用"),t("code",{pre:!0},[e._v("nmap -oX xxx.xml")]),e._v("输出为 XML 文件")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("--file")]),e._v("指定 XML 文件")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-U")]),e._v("用户名文件")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("-P")]),e._v("密码文件")])]),e._v(" "),t("h2",{attrs:{id:"msf"}},[e._v("MSF")]),e._v(" "),t("ul",[t("li",[e._v("Metasploit Framework")]),e._v(" "),t("li",[e._v("是一个框架")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("msfconsole")]),e._v("进入交互式命令行\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("search ssh")]),e._v("搜索模块")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("use xxx")]),e._v("使用模块")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("set xxx xxx")]),e._v("设置变量")]),e._v(" "),t("li",[t("code",{pre:!0},[e._v("run")]),e._v("执行模块")])])])]),e._v(" "),t("h2",{attrs:{id:"防御"}},[e._v("防御")]),e._v(" "),t("ul",[t("li",[e._v("仅给需要登录的用户设置密码\n"),t("ul",[t("li",[e._v("创建新用户的时候，使用"),t("code",{pre:!0},[e._v("-s /sbin/nologin")]),e._v("禁用登陆")])])]),e._v(" "),t("li",[e._v("使用复杂密码\n"),t("ul",[t("li",[e._v("大小写、数字、特殊字符、长密码、"),t("strong",[e._v("定期轮换")])])])]),e._v(" "),t("li",[e._v("修改默认端口")]),e._v(" "),t("li",[e._v("限制登录的用户/组\n"),t("ul",[t("li",[e._v("比如修改"),t("code",{pre:!0},[e._v("sshd_config")]),e._v("里面的"),t("code",{pre:!0},[e._v("AllowUsers/AllowGroups/DenyUsers/DenyGroups")])])])]),e._v(" "),t("li",[e._v("不使用根用户，使用"),t("code",{pre:!0},[e._v("sudo")])]),e._v(" "),t("li",[e._v("限制来源 IP")]),e._v(" "),t("li",[e._v("使用"),t("code",{pre:!0},[e._v("DenyHosts")]),e._v("自动统计")]),e._v(" "),t("li",[e._v("基于 PAM 实现登陆限制")]),e._v(" "),t("li",[e._v("使用密钥对而不是密码\n"),t("ul",[t("li",[e._v("禁用密码登录")])])])])])}]};e.exports={attributes:{title:"Security-9",description:"暴力破解"},vue:{render:t.render,staticRenderFns:t.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=t.render,this.$options.staticRenderFns=t.staticRenderFns}}}}}}]);