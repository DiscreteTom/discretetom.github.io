(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{1105:function(v,_){const e={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("div",{staticClass:"frontmatter-markdown"},[e("h2",{attrs:{id:"前言"}},[v._v("前言")]),v._v(" "),e("p",[v._v("本文是观看"),e("a",{attrs:{href:"https://www.bilibili.com/video/bv164411J761"}},[v._v("此视频")]),v._v("时整理的笔记。")]),v._v(" "),e("h2",{attrs:{id:"centos版本对比"}},[v._v("CentOS版本对比")]),v._v(" "),e("p",[v._v("CentOS 6.x和7.x使用了不同的Linux内核，所以配置上有些不同。本系列笔记主要以CentOS 6为例")]),v._v(" "),e("table",[e("thead",[e("tr",[e("th"),v._v(" "),e("th",[v._v("CentOS 6.x")]),v._v(" "),e("th",[v._v("CentOS 7.x")])])]),v._v(" "),e("tbody",[e("tr",[e("td",[v._v("文件系统")]),v._v(" "),e("td",[v._v("EXT4，文件系统容量1EB，单个文件16TB")]),v._v(" "),e("td",[v._v("XFS，文件系统容量默认8EB，最大18EB，单个文件9EB，更快更稳定")])]),v._v(" "),e("tr",[e("td",[v._v("防火墙")]),v._v(" "),e("td",[v._v("iptables")]),v._v(" "),e("td",[v._v("firewalld")])]),v._v(" "),e("tr",[e("td",[v._v("内核")]),v._v(" "),e("td",[v._v("2.6.x-x")]),v._v(" "),e("td",[v._v("3.10.x-x")])]),v._v(" "),e("tr",[e("td",[v._v("默认数据库")]),v._v(" "),e("td",[v._v("MySQL")]),v._v(" "),e("td",[v._v("MariaDB")])]),v._v(" "),e("tr",[e("td",[v._v("时间同步")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("ntpq -p")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("chronyc sources")])])]),v._v(" "),e("tr",[e("td",[v._v("修改时区")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("/etc/sysconfig/clock")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("timedatectl set-timezone Asia/Shanghai")])])]),v._v(" "),e("tr",[e("td",[v._v("修改语言")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("/etc/sysconfig/i18n")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("localectl set-locale LANG=zh_CN.UTF-8")])])]),v._v(" "),e("tr",[e("td",[v._v("主机名")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("/etc/sysconfig/network")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("/etc/hostname")]),v._v("或者使用命令"),e("code",{pre:!0},[v._v("hostnamectl")])])]),v._v(" "),e("tr",[e("td",[v._v("服务管理")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("service")]),v._v("和"),e("code",{pre:!0},[v._v("chkconfig")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("systemctl")])])]),v._v(" "),e("tr",[e("td",[v._v("网卡名")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("eth0")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("ens33")]),v._v("，其中"),e("code",{pre:!0},[v._v("33")]),v._v("为根据硬件随机算出来的值。第一个网卡一定是"),e("code",{pre:!0},[v._v("33")])])]),v._v(" "),e("tr",[e("td",[v._v("网络配置命令")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("ifconfig")]),v._v("/"),e("code",{pre:!0},[v._v("setup")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("ip")]),v._v("/"),e("code",{pre:!0},[v._v("nmtui")])])]),v._v(" "),e("tr",[e("td",[v._v("网络服务")]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("network")])]),v._v(" "),e("td",[e("code",{pre:!0},[v._v("NetworkManager")])])])])]),v._v(" "),e("p",[v._v("CentOS 7网卡配置：")]),v._v(" "),e("ul",[e("li",[v._v("配置文件："),e("code",{pre:!0},[v._v("/etc/sysconfig/network-scripts/ifcfg-ens33")])]),v._v(" "),e("li",[v._v("配置命令："),e("code",{pre:!0},[v._v("ifconfig address show")]),v._v("或"),e("code",{pre:!0},[v._v("ip address show")])]),v._v(" "),e("li",[v._v("配置文件内容：\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("DEVICE=ens33")]),v._v("硬件设备名")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("NAME=ens33")]),v._v("Linux中的网卡名。必须和硬件设备名相同")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("BOOTPORTO=static")]),v._v("连接方式，"),e("code",{pre:!0},[v._v("dhcp/static")])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("ONBOOT=yes")]),v._v("是否开机加载")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("IPADDR=192.168.12.250")])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("NETMASK=255.255.255.0")]),v._v("或者"),e("code",{pre:!0},[v._v("PREFIX=24")])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("GATEWAY=192.168.12.1")])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("DNS1=8.8.8.8")])])])])]),v._v(" "),e("h2",{attrs:{id:"修改网卡名"}},[v._v("修改网卡名")]),v._v(" "),e("p",[v._v("如果觉得"),e("code",{pre:!0},[v._v("ens33")]),v._v("看起来没有"),e("code",{pre:!0},[v._v("eth0")]),v._v("舒服，可以修改网卡名")]),v._v(" "),e("ol",[e("li",[v._v("复制配置文件："),e("code",{pre:!0},[v._v("cp -a ifcfg-ens33 ifcfg-eth0")]),v._v("，然后把原配置文件放到其他目录防止干扰")]),v._v(" "),e("li",[v._v("修改配置文件中的网卡名\n"),e("ol",[e("li",[e("code",{pre:!0},[v._v("NAME=eth0")])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("DEVICE=eth0")])])])]),v._v(" "),e("li",[v._v("修改GRUB配置元文件"),e("code",{pre:!0},[v._v("/etc/default/grub")]),v._v("，在"),e("code",{pre:!0},[v._v("GRUB_CMDLINE_LINUX")]),v._v("值的最后添加"),e("code",{pre:!0},[v._v("net.ifnames=0 biosdevname=0")])]),v._v(" "),e("li",[v._v("生成新的GRUB配置文件："),e("code",{pre:!0},[v._v("grub2-mkconfig -o /boot/grub2/grub.cfg")])]),v._v(" "),e("li",[v._v("重启："),e("code",{pre:!0},[v._v("reboot")])])]),v._v(" "),e("h2",{attrs:{id:"网络协议与端口"}},[v._v("网络协议与端口")]),v._v(" "),e("ul",[e("li",[v._v("数据链路层\n"),e("ul",[e("li",[v._v("PPP")])])]),v._v(" "),e("li",[v._v("网络层\n"),e("ul",[e("li",[v._v("IP")]),v._v(" "),e("li",[v._v("ICMP")]),v._v(" "),e("li",[v._v("ARP")])])]),v._v(" "),e("li",[v._v("传输层\n"),e("ul",[e("li",[v._v("TCP")]),v._v(" "),e("li",[v._v("UDP")])])]),v._v(" "),e("li",[v._v("应用层\n"),e("ul",[e("li",[v._v("FTP")]),v._v(" "),e("li",[v._v("HTTP")]),v._v(" "),e("li",[v._v("SMTP")]),v._v(" "),e("li",[v._v("Telnet")]),v._v(" "),e("li",[v._v("DNS")])])])]),v._v(" "),e("p",[v._v("在"),e("code",{pre:!0},[v._v("/etc/service")]),v._v("中可以查看端口对应的协议")]),v._v(" "),e("p",[v._v("常见端口：")]),v._v(" "),e("ul",[e("li",[v._v("20/21 - FTP")]),v._v(" "),e("li",[v._v("22 - SSH")]),v._v(" "),e("li",[v._v("23 - telnet")]),v._v(" "),e("li",[v._v("25 - smtp发信")]),v._v(" "),e("li",[v._v("465 - smtp(SSL)发信")]),v._v(" "),e("li",[v._v("110 - POP3收信")]),v._v(" "),e("li",[v._v("143 - imap收信")]),v._v(" "),e("li",[v._v("993 - imap4(SSL)收信")]),v._v(" "),e("li",[v._v("80 - HTTP")]),v._v(" "),e("li",[v._v("443 - HTTPS")]),v._v(" "),e("li",[v._v("3306 - MySQL")]),v._v(" "),e("li",[v._v("53 - DNS")])]),v._v(" "),e("h2",{attrs:{id:"网关与路由"}},[v._v("网关与路由")]),v._v(" "),e("p",[v._v("网关：特殊的路由设备，有一个默认路由条目负责处理其他规则没有匹配成功的流量")]),v._v(" "),e("ul",[e("li",[e("code",{pre:!0},[v._v("route -n")]),v._v("查看系统中的路由表信息")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("route add/del default gw <ip>")]),v._v("临时添加或删除路由")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("/etc/sysconfig/network-scripts/ifcfg-eth0")]),v._v("永久修改路由。或者使用"),e("code",{pre:!0},[v._v("setup")]),v._v("命令修改此文件")])]),v._v(" "),e("h2",{attrs:{id:"网络相关命令"}},[v._v("网络相关命令")]),v._v(" "),e("h3",{attrs:{id:"dns"}},[v._v("DNS")]),v._v(" "),e("ul",[e("li",[e("code",{pre:!0},[v._v("nslookup <domain|ip>")]),v._v("域名解析测试。支持反向解析\n"),e("ul",[e("li",[v._v("配置文件\n"),e("ul",[e("li",[v._v("单个网卡："),e("code",{pre:!0},[v._v("/etc/sysconfig/network-scripts/ifcfg-eth0")]),v._v("中"),e("code",{pre:!0},[v._v("DNS=<ip>")])]),v._v(" "),e("li",[v._v("全局："),e("code",{pre:!0},[v._v("/etc/resolv.conf")]),v._v("中"),e("code",{pre:!0},[v._v("nameserver <ip>")]),v._v("。优先级高于单个网卡的配置")])])])])]),v._v(" "),e("li",[v._v("静态DNS配置文件："),e("code",{pre:!0},[v._v("/etc/hosts")])])]),v._v(" "),e("h3",{attrs:{id:"查询网络状态"}},[v._v("查询网络状态")]),v._v(" "),e("ul",[e("li",[e("code",{pre:!0},[v._v("netstat")]),v._v("。可能需要安装"),e("code",{pre:!0},[v._v("net-tools")]),v._v("才能使用\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("-a")]),v._v("显示所有活动连接")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-n")]),v._v("以数字的形式显示")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-t")]),v._v("查看TCP连接")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-u")]),v._v("查看UDP连接")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-p")]),v._v("显示PID和进程名")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-l")]),v._v("监听")])])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("traceroute")]),v._v("查询网络路径。使用ICMP协议，默认数据包40字节\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("-p")]),v._v("使用UDP进行测试。默认端口33434")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-q <count>")]),v._v("指定数据包个数（默认3个）")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-n")]),v._v("以IP的方式进行连接，避开DNS解析")])])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("ping")]),v._v("测试网络连通性。使用ICMP协议\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("-i <second>")]),v._v("指定间隔（不要太短）")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-c <count>")]),v._v("指定次数")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-s <size>")]),v._v("指定数据包大小")])])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("arp")]),v._v("地址解析。把IP地址解析为MAC地址\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("-a")]),v._v("查看所有已知的IP和MAC对应关系")]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-d")]),v._v("删除某条ARP记录")])])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("nmap")]),v._v("网络探测扫描。默认系统中没有安装\n"),e("ul",[e("li",[e("code",{pre:!0},[v._v("-sP")]),v._v("探测某个网端哪些主机是存活的\n"),e("ul",[e("li",[v._v("例："),e("code",{pre:!0},[v._v("nmap -sP 192.168.88.0/24")])])])]),v._v(" "),e("li",[e("code",{pre:!0},[v._v("-sT")]),v._v("探测某个主机开启了哪些TCP端口\n"),e("ul",[e("li",[v._v("默认不扫描高位端口，只扫描常规端口")])])])])])])])}]};v.exports={attributes:{title:"Linux Network Applications (Part 1)",description:"CentOS版本对比，网络协议概述，网络配置相关命令"},vue:{render:e.render,staticRenderFns:e.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(v){return this.templateRender?this.templateRender():v("div","Rendering")},created:function(){this.templateRender=e.render,this.$options.staticRenderFns=e.staticRenderFns}}}}}}]);