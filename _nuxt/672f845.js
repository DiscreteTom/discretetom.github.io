(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{1160:function(t,n){const e={render:function(){var t=this;t.$createElement;return t._self._c,t._m(0)},staticRenderFns:[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"frontmatter-markdown"},[e("h2",{attrs:{id:"前言"}},[t._v("前言")]),t._v(" "),e("p",[t._v("本文是观看"),e("a",{attrs:{href:"https://www.bilibili.com/video/BV1NJ411D7rf"}},[t._v("此视频")]),t._v("时整理的笔记")]),t._v(" "),e("h2",{attrs:{id:"前置知识"}},[t._v("前置知识")]),t._v(" "),e("ul",[e("li",[t._v("智能合约部署时，由普通账户给一个特殊的全 0 地址（Contract Creator）发出交易，即可部署。部署后会得到一个合约的地址")]),t._v(" "),e("li",[t._v("部署后的合约无法修改。重新部署会得到新的地址")])]),t._v(" "),e("h2",{attrs:{id:"数据存储"}},[t._v("数据存储")]),t._v(" "),e("ul",[e("li",[t._v("位置\n"),e("ul",[e("li",[t._v("Storage\n"),e("ul",[e("li",[t._v("每个账户都有的 256 位到 256 位的 k/v 存储")]),t._v(" "),e("li",[t._v("永久保存在区块链中，读写消耗的 gas 最多")])])]),t._v(" "),e("li",[t._v("Memory\n"),e("ul",[e("li",[t._v("每一次消息调用，合约都会获得一块内存")]),t._v(" "),e("li",[t._v("合约执行完毕后，内存被释放")]),t._v(" "),e("li",[t._v("仅用来保存临时变量，gas 开销比较小")])])]),t._v(" "),e("li",[t._v("Stack\n"),e("ul",[e("li",[t._v("EVM 不是基于寄存器的，是基于栈的，所有的计算都在栈里面进行")]),t._v(" "),e("li",[t._v("存放部分局部变量，几乎免费使用，但是数量有限制")])])])])]),t._v(" "),e("li",[t._v("复杂数据类型/引用数据类型（数组、结构、映射）可以手动设置存储位置")]),t._v(" "),e("li",[t._v("根据上下文，大部分情况数据都是由默认的存储位置的\n"),e("ul",[e("li",[t._v("函数参数/返回值默认是 memory")]),t._v(" "),e("li",[e("strong",[t._v("复杂类型局部变量默认是 storage")])]),t._v(" "),e("li",[t._v("简单类型局部变量在 stack")]),t._v(" "),e("li",[t._v("状态变量必需是 storage")])])]),t._v(" "),e("li",[t._v("把 storage 类型的变量赋值给 storage 类型的变量时，视为引用，并没有复制里面的数据")])]),t._v(" "),e("h2",{attrs:{id:"evm-指令集"}},[t._v("EVM 指令集")]),t._v(" "),e("ul",[e("li",[t._v("所有指令都是针对 256 位的字进行操作")]),t._v(" "),e("li",[t._v("具备算数、位、逻辑、比较、跳转等操作")]),t._v(" "),e("li",[t._v("合约可以访问当前区块的属性，比如块高度和时间戳")])]),t._v(" "),e("h2",{attrs:{id:"创建与销毁合约"}},[t._v("创建与销毁合约")]),t._v(" "),e("ul",[e("li",[t._v("普通用户可以给"),e("code",{pre:!0},[t._v("0x0")]),t._v("发交易从而创建合约")]),t._v(" "),e("li",[t._v("合约可以使用"),e("code",{pre:!0},[t._v("create calls")]),t._v("创建其他合约")]),t._v(" "),e("li",[t._v("唯一从区块链移除合约的方式就是执行"),e("code",{pre:!0},[t._v("selfdestruct")]),t._v("操作进行自毁\n"),e("ul",[e("li",[t._v("合约上面剩余的以太币会发送给指定的目标")]),t._v(" "),e("li",[t._v("存储的代码和状态会被移除")])])])]),t._v(" "),e("h2",{attrs:{id:"solidity"}},[t._v("Solidity")]),t._v(" "),e("h3",{attrs:{id:"概述"}},[t._v("概述")]),t._v(" "),e("ul",[e("li",[t._v("Solidity 是一个面向合约的语言")]),t._v(" "),e("li",[t._v("静态类型，支持继承、库、自定义类型")]),t._v(" "),e("li",[t._v("在 EVM 上运行")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v(".sol")]),t._v("作为扩展名")]),t._v(" "),e("li",[t._v("包含一些独有的数据类型，比如"),e("code",{pre:!0},[t._v("address")])]),t._v(" "),e("li",[t._v("一旦出现异常，所有执行都会回退")]),t._v(" "),e("li",[t._v("Solidity 编写的智能合约源码会被编译为字节码(Bytecode)，编译会同时产生智能合约的二进制接口规范(ABI: Application Binary Interface)，被 web3 使用\n"),e("ul",[e("li",[t._v("字节码被部署到以太坊网络")]),t._v(" "),e("li",[t._v("使用 JavaScript 编写的 DAPP 通常通过 web3+ABI 调用智能合约中的函数")])])]),t._v(" "),e("li",[t._v("主流的编译器\n"),e("ul",[e("li",[t._v("Remix，基于 web 的 IDE：https://remix.ethereum.org")]),t._v(" "),e("li",[t._v("solcjs，基于命令行和 npm: "),e("code",{pre:!0},[t._v("npm install -g solc")])])])])]),t._v(" "),e("h3",{attrs:{id:"语法"}},[t._v("语法")]),t._v(" "),e("ul",[e("li",[e("code",{pre:!0},[t._v("pragma")]),t._v("指定语言版本")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("import")]),t._v("导入其他源文件")]),t._v(" "),e("li",[t._v("合约之间可以相互继承："),e("code",{pre:!0},[t._v("contract A is B { ... }")])]),t._v(" "),e("li",[t._v("函数可见性\n"),e("ul",[e("li",[e("code",{pre:!0},[t._v("external")]),t._v(" - 不能直接从内部调用。可以被外部调用。可以被"),e("code",{pre:!0},[t._v("this.f()")]),t._v("从内部调用。收到大量数据的时候，external 函数可能性能更高")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("public")]),t._v(" - 可以从外部调用，可以被继承者调用")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("private")]),t._v(" - 只能内部调用，无法被继承")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("internal")]),t._v(" - 只能内部调用，可以被继承者调用")])])]),t._v(" "),e("li",[t._v("如果给变量添加"),e("code",{pre:!0},[t._v("public")]),t._v("修饰，则自动生成一个 public 的同名 getter，但是没有 setter")]),t._v(" "),e("li",[t._v("函数状态可变性\n"),e("ul",[e("li",[e("code",{pre:!0},[t._v("pure")]),t._v("纯函数，不允许访问状态")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("view")]),t._v("只读函数，不允许修改状态")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("payable")]),t._v("允许函数接受别人的以太币")])])]),t._v(" "),e("li",[t._v("回退函数(fallback)\n"),e("ul",[e("li",[t._v("没有名字、参数、返回值")]),t._v(" "),e("li",[t._v("其他所有函数都没有被匹配的时候，调用回退函数")]),t._v(" "),e("li",[t._v("合约收到以太币，没有其他数据（函数名、参数）的时候，执行回退函数")])])]),t._v(" "),e("li",[t._v("事件\n"),e("ul",[e("li",[t._v("用来实现日志、消息通知等")])])]),t._v(" "),e("li",[t._v("异常处理\n"),e("ul",[e("li",[e("code",{pre:!0},[t._v("assert")]),t._v("用来检查内部错误")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("require")]),t._v("用来检查外部错误（比如函数参数是否合法）")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("revert")]),t._v("用来直接抛出异常")]),t._v(" "),e("li",[t._v("异常会直接导致状态回退")])])]),t._v(" "),e("li",[t._v("数据单位\n"),e("ul",[e("li",[t._v("可以直接使用数据单位，实现数据转换（比如 ether -> wei）")]),t._v(" "),e("li",[t._v("比如："),e("code",{pre:!0},[t._v("address.send(2 ether)")])]),t._v(" "),e("li",[t._v("除了以太的单位，还有时间的单位，比如"),e("code",{pre:!0},[t._v("if (now >= start + 1 days)")]),t._v("。默认单位是秒")]),t._v(" "),e("li",[t._v("只能用在常量后面")])])])]),t._v(" "),e("h3",{attrs:{id:"数据类型"}},[t._v("数据类型")]),t._v(" "),e("ul",[e("li",[t._v("值类型\n"),e("ul",[e("li",[t._v("bool")]),t._v(" "),e("li",[t._v("int8/uint8 … int256/uint256 - 整型\n"),e("ul",[e("li",[t._v("默认 "),e("code",{pre:!0},[t._v("int/uint")]),t._v(" 都是 256 位的")])])]),t._v(" "),e("li",[t._v("fixed/ufixed - 浮点型（有符号、无符号）\n"),e("ul",[e("li",[t._v("比如"),e("code",{pre:!0},[t._v("fixed128x28")]),t._v("表示一共 128 位，其中 28 位是小数")]),t._v(" "),e("li",[t._v("默认"),e("code",{pre:!0},[t._v("fixed/ufixed")]),t._v("是"),e("code",{pre:!0},[t._v("128x19")])])])]),t._v(" "),e("li",[t._v("address\n"),e("ul",[e("li",[t._v("20 字节的地址")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("address payable")]),t._v("，v0.5.0 引入的新类型，多了"),e("code",{pre:!0},[t._v("transfer")]),t._v("和"),e("code",{pre:!0},[t._v("send")]),t._v("两个成员")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("address(0)")]),t._v("获取"),e("code",{pre:!0},[t._v("0x0")]),t._v("的地址")]),t._v(" "),e("li",[e("code",{pre:!0},[t._v("address(this)")]),t._v("获取当前合约的地址")]),t._v(" "),e("li",[t._v("成员变量\n"),e("ul",[e("li",[t._v("balance - 余额，单位为 wei")]),t._v(" "),e("li",[t._v("transfer - 从合约给地址发以太，失败时抛出异常。固定消耗 2300 gas")]),t._v(" "),e("li",[t._v("send - 从合约给地址发以太，失败时返回 false。固定消耗 2300 gas")]),t._v(" "),e("li",[t._v("call - 调用其他函数。发送者为此合约。默认发送所有剩余 gas。底层函数，不常用")]),t._v(" "),e("li",[t._v("delegatecall - 代理调用其他函数。发送者为此合约的发送者。默认发送所有剩余 gas。底层函数，不常用")]),t._v(" "),e("li",[t._v("staticcall - 调用其他方法时不会改变状态。默认发送所有剩余 gas。底层函数，不常用")])])])])]),t._v(" "),e("li",[t._v("enum")]),t._v(" "),e("li",[t._v("function")]),t._v(" "),e("li",[t._v("bytes1, … bytes32")])])]),t._v(" "),e("li",[t._v("引用类型\n"),e("ul",[e("li",[t._v("array\n"),e("ul",[e("li",[t._v("可以动态调整大小")]),t._v(" "),e("li",[t._v("如果是 storage 型的数组，元素类型是任意的")]),t._v(" "),e("li",[t._v("如果是 memory 型的数组，元素类型不能是 mapping")]),t._v(" "),e("li",[t._v("越界访问的时候直接抛出异常并回退")]),t._v(" "),e("li",[t._v("添加元素的时候，可以"),e("code",{pre:!0},[t._v("push")]),t._v("，也可以直接修改"),e("code",{pre:!0},[t._v("length")])])])]),t._v(" "),e("li",[t._v("struct")]),t._v(" "),e("li",[t._v("mapping\n"),e("ul",[e("li",[t._v("创建的时候，创建所有 key，所有 key 的值是 0")])])]),t._v(" "),e("li",[t._v("bytes/string - 变长字符数组。一个是 Hex 编码，一个是 UTF-8 编码")])])])]),t._v(" "),e("h3",{attrs:{id:"示例水龙头合约"}},[t._v("示例：水龙头合约")]),t._v(" "),e("p",[t._v("文件："),e("code",{pre:!0},[t._v("Faucet.sol")])]),t._v(" "),e("pre",{staticClass:"language-sol"},[e("code",{pre:!0,attrs:{class:"language-sol"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.17")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定Solidity语言版本")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Faucet")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 合约名需要和文件名一致")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一个叫withdraw的公开的函数")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000000000000000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数不能大于一个以太，即10^18 wei")]),t._v("\n    msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过一个inner transaction发送币")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每个合约可以有一个没有名字的函数，称为回退函数(fallback)")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他函数都没有被调用时，调用此函数")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// payable 表示可支付的，即可以接受别人的币")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数里面没有任何操作，所以接受币的时候没有任何操作就接受")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("payable")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"示例能存储数据的合约"}},[t._v("示例：能存储数据的合约")]),t._v(" "),e("pre",{staticClass:"language-solidity"},[e("code",{pre:!0,attrs:{class:"language-solidity"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.22")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleStorage")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也可以把变量设置为Public，可以从外部直接读取（getter）")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// public uint data;")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" newData"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newData"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// view表示此函数不会修改状态")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 支持多返回值")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pure表示此函数是纯粹的计算函数，不会访问状态")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回值可以在函数头命名")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pureAdd")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pure")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" sum"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构造函数，可以在创建智能合约的时候给变量设置初始值")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" initValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"示例空气币"}},[t._v("示例：空气币")]),t._v(" "),e("p",[t._v("可以无限发币")]),t._v(" "),e("pre",{staticClass:"language-solidity"},[e("code",{pre:!0,attrs:{class:"language-solidity"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.22")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Coin")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" minter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 铸币者")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" balances"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所有账户的余额")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义一个事件，以便被外部监听")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    minter "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建此币的人为铸币者")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" receiver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" minter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有铸币者可以铸币")]),t._v("\n    balances"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("receiver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 接收者获得此币")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" receiver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" balances"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送者要拥有足够的币")]),t._v("\n    balances"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    balances"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("receiver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要注意uint是256位，可能有溢出的问题")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("emit")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"官方示例一种子货币"}},[t._v("官方示例：一种子货币")]),t._v(" "),e("p",[t._v("https://www.ethereum.org/token")]),t._v(" "),e("p",[t._v("总量固定")]),t._v(" "),e("pre",{staticClass:"language-solidity"},[e("code",{pre:!0,attrs:{class:"language-solidity"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Token")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" initialSupply"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialSupply"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" success"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" amount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 防溢出")]),t._v("\n    balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    balance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" amount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第三方平台可以根据返回值判断是否交易成功")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"示例简单的投票合约"}},[t._v("示例：简单的投票合约")]),t._v(" "),e("pre",{staticClass:"language-solidity"},[e("code",{pre:!0,attrs:{class:"language-solidity"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.22")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ballot")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Voter")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" weight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" voted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint8")]),t._v(" vote"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" delegate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proposal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" voteCount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" chairperson"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" Voter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Proposal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint8")]),t._v(" numProposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chairperson "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chairperson"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("weight "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" numProposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("giveRightToVote")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" chairperson"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("weight "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("delegate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Voter sender "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      to "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// delegate to self")]),t._v("\n\n    sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delegate "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Voter "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("storage")]),t._v(" delegateTo "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delegateTo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("delegateTo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vote"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voteCount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("weight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n      delegateTo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("weight "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("weight"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vote")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint8")]),t._v(" toProposal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Voter "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("storage")]),t._v(" sender "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" voters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" toProposal "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voted "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    sender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vote "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" toProposal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("winningProposal")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constant")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint8")]),t._v(" result"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" winningVoteCount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint8")]),t._v(" prop "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" prop "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" prop"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voteCount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" winningVoteCount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        winningVoteCount "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" proposals"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voteCount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        result "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"示例modifier"}},[t._v("示例：Modifier")]),t._v(" "),e("p",[t._v("可以自定义函数的 modifier（类似于装饰器）")]),t._v(" "),e("pre",{staticClass:"language-solidity"},[e("code",{pre:!0,attrs:{class:"language-solidity"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.22")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Purchase")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" seller"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("modifier")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onlySeller")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" seller"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Only seller can call"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("_")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行原函数")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("abort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" onlySeller "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("h3",{attrs:{id:"标准规范"}},[t._v("标准规范")]),t._v(" "),e("p",[t._v("有一些常见的需求已经被标准化，比如发币、NFT 等，详见：https://eips.ethereum.org/erc")]),t._v(" "),e("p",[t._v("比如：")]),t._v(" "),e("ul",[e("li",[t._v("ERC 20 - 代币合约")]),t._v(" "),e("li",[t._v("ERC 721 - NFT")])]),t._v(" "),e("h3",{attrs:{id:"事件监听"}},[t._v("事件监听")]),t._v(" "),e("pre",{staticClass:"language-js"},[e("code",{pre:!0,attrs:{class:"language-js"}},[e("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Coin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token method function property-access"}},[e("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Sent")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("watch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token spread operator"}},[t._v("...")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])}]};t.exports={attributes:{title:"智能合约",description:"Solidity"},vue:{render:e.render,staticRenderFns:e.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=e.render,this.$options.staticRenderFns=e.staticRenderFns}}}}}}]);