(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{1182:function(e,v){const _={render:function(){var e=this;e.$createElement;return e._self._c,e._m(0)},staticRenderFns:[function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("div",{staticClass:"frontmatter-markdown"},[_("h2",{attrs:{id:"前言"}},[e._v("前言")]),e._v(" "),_("p",[e._v("本文是观看"),_("a",{attrs:{href:"https://www.bilibili.com/video/bv164411J761"}},[e._v("此视频")]),e._v("时整理的笔记。")]),e._v(" "),_("h2",{attrs:{id:"vsftp"}},[e._v("VSFTP")]),e._v(" "),_("h3",{attrs:{id:"概述"}},[e._v("概述")]),e._v(" "),_("p",[e._v("常见文件传输软件：")]),e._v(" "),_("ul",[_("li",[e._v("FTP - 明文传输文件")]),e._v(" "),_("li",[e._v("SFTP - 密文传输文件")]),e._v(" "),_("li",[e._v("VSFTP(Very Secure FTP) - 仍然使用FTP明文传输文件，但是有更多的权限控制。可以使用openssl实现加密")])]),e._v(" "),_("p",[e._v("安全特性：")]),e._v(" "),_("ul",[_("li",[e._v("程序的运行者通常是普通用户，降低了进程权限，防止进程劫持后出现问题")]),e._v(" "),_("li",[e._v("任何需要执行较高权限的交互指令都需要上层程序的许可")]),e._v(" "),_("li",[e._v("FTP的绝大多数交互命令都在VSFTP中可用，不需要执行系统命令")]),e._v(" "),_("li",[e._v("拥有chroot功能，可以改变用户的根目录（默认登录目录），限制用户只能在自己的家目录")])]),e._v(" "),_("p",[e._v("FTP通常会使用两个连接：")]),e._v(" "),_("ul",[_("li",[e._v("控制连接\n"),_("ul",[_("li",[e._v("持续listen")]),e._v(" "),_("li",[e._v("TCP 21")]),e._v(" "),_("li",[e._v("收发FTP命令")]),e._v(" "),_("li",[e._v("类似于HTTP的短连接")])])]),e._v(" "),_("li",[e._v("数据连接\n"),_("ul",[_("li",[e._v("需要传输数据时才会被使用")]),e._v(" "),_("li",[e._v("主动模式是TCP 20，被动模式端口号随机")]),e._v(" "),_("li",[e._v("传输数据")]),e._v(" "),_("li",[e._v("长连接")])])])]),e._v(" "),_("h3",{attrs:{id:"工作模式"}},[e._v("工作模式")]),e._v(" "),_("h4",{attrs:{id:"主动模式"}},[e._v("主动模式")]),e._v(" "),_("p",[e._v("也叫Port模式。服务器使用固定的20端口主动向客户端建立连接传输数据")]),e._v(" "),_("ol",[_("li",[e._v("服务器监听21端口")]),e._v(" "),_("li",[e._v("客户端向21端口发送登录信息进行登录")]),e._v(" "),_("li",[e._v("客户端登录成功后开放一个随机端口，然后使用"),_("code",{pre:!0},[e._v("PORT")]),e._v("命令通知服务器")]),e._v(" "),_("li",[e._v("服务器使用20端口主动向客户端指定的端口发起请求并传输数据")]),e._v(" "),_("li",[e._v("数据传输完毕后服务器关闭20端口")])]),e._v(" "),_("blockquote",[_("p",[e._v("TODO：为什么不是客户端主动连接服务器的20端口？")])]),e._v(" "),_("p",[e._v("连接次数较少，过程较为简单，适合请求频繁但是数据量小的文件")]),e._v(" "),_("p",[e._v("FTP默认使用主动模式")]),e._v(" "),_("h4",{attrs:{id:"被动模式"}},[e._v("被动模式")]),e._v(" "),_("p",[e._v("服务器开放随机端口用来传输数据，客户端主动连接此端口")]),e._v(" "),_("ol",[_("li",[e._v("服务器监听21端口，并指定数据端口取值范围\n"),_("ol",[_("li",[e._v("比如60000-65535。默认是1023-65535")]),e._v(" "),_("li",[e._v("注意设置防火墙")])])]),e._v(" "),_("li",[e._v("客户端向21端口发送登录信息进行登录")]),e._v(" "),_("li",[e._v("客户端使用"),_("code",{pre:!0},[e._v("PASV")]),e._v("命令通知服务器使用被动模式")]),e._v(" "),_("li",[e._v("服务器开放随机端口号，然后告诉客户端")]),e._v(" "),_("li",[e._v("客户端使用随机端口连接服务器指定的端口并传输数据")])]),e._v(" "),_("p",[e._v("随机端口更安全")]),e._v(" "),_("h3",{attrs:{id:"传输模式"}},[e._v("传输模式")]),e._v(" "),_("ul",[_("li",[e._v("Binary\n"),_("ul",[_("li",[e._v("不对数据进行任何处理")])])]),e._v(" "),_("li",[e._v("ASCII\n"),_("ul",[_("li",[e._v("进行文本传输时，自动适应目标操作系统的回车换行符")])])])]),e._v(" "),_("p",[e._v("RHEL发行版（包括CentOS）的VSFTP默认使用Binary模式")]),e._v(" "),_("p",[e._v("切换方式：在FTP交互模式下使用"),_("code",{pre:!0},[e._v("ascii")]),e._v("或"),_("code",{pre:!0},[e._v("bin")]),e._v("切换到对应模式")]),e._v(" "),_("h3",{attrs:{id:"软件信息"}},[e._v("软件信息")]),e._v(" "),_("ul",[_("li",[e._v("服务端软件 & 服务名\n"),_("ul",[_("li",[_("code",{pre:!0},[e._v("vsftpd")])])])]),e._v(" "),_("li",[e._v("客户端软件\n"),_("ul",[_("li",[_("code",{pre:!0},[e._v("ftp")])])])])]),e._v(" "),_("h3",{attrs:{id:"配置文件"}},[e._v("配置文件")]),e._v(" "),_("p",[_("code",{pre:!0},[e._v("/etc/vsftpd/vsftpd.conf")])]),e._v(" "),_("p",[_("strong",[e._v("此文件的注释需要在单独的一行")]),e._v("，所以下面的示范其实是错的")]),e._v(" "),_("pre",{staticClass:"language-bash"},[_("code",{pre:!0,attrs:{class:"language-bash"}},[_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 匿名用户相关")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anonymous_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 是否启用匿名用户")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_upload_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 是否允许匿名用户上传")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_umask")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("022 "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 匿名用户上传文件的umask")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_root")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/var/ftp\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_mkdir_write_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 允许创建目录")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_other_write_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 开放其他写入权限（删除、覆盖、重命名）")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("anon_max_rate")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 限制传输速率，0为不限制。单位bytes/s")]),e._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 本地用户相关")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("local_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("local_umask")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("022\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("local_root")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/var/ftp\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("chroot_local_user")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 把所有用户禁锢在家目录")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("chroot_list_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 白名单中的用户可以随意切换目录")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("chroot_list_file")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/etc/vsftpd/chroot_list "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 切换目录白名单")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("local_max_rate")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ftpd_banner")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("welcome "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 用户登录的欢迎信息")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 权限")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("userlist_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 使用/etc/vsftpd/user_list文件进行权限控制")]),e._v("\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 需要结合userlist_deny一同使用")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("userlist_deny")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 如果是YES，禁止user_list文件中的用户登录")]),e._v("\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 如果是NO，仅允许user_list中的用户登录")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 另一个配置文件：/etc/vsftpd/ftpusers")]),e._v("\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 优先级高于user_list")]),e._v("\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 只要用户出现在ftpusers里面就会被禁止登录")]),e._v("\n\t"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 立刻生效，无需重启服务")]),e._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 被动模式")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("pasv_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("pasv_min_port")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("30000")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("pasv_max_port")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("35000")]),e._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 其他")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("dirmessage_enable")]),_("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YES "),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 登录时显示文件夹下.message文件的内容")]),e._v("\n")])]),e._v(" "),_("h3",{attrs:{id:"登录验证过程"}},[e._v("登录验证过程")]),e._v(" "),_("h4",{attrs:{id:"三种用户"}},[e._v("三种用户")]),e._v(" "),_("ul",[_("li",[e._v("匿名用户\n"),_("ul",[_("li",[e._v("用户名为"),_("code",{pre:!0},[e._v("ftp")]),e._v("或"),_("code",{pre:!0},[e._v("anonymous")])]),e._v(" "),_("li",[e._v("无密码")]),e._v(" "),_("li",[e._v("工作目录"),_("code",{pre:!0},[e._v("/var/ftp")])]),e._v(" "),_("li",[e._v("默认可下载不可上传。下载权限也受文件系统控制")]),e._v(" "),_("li",[e._v("上传权限由两部分组成\n"),_("ul",[_("li",[e._v("主配置文件是否允许匿名用户上传")]),e._v(" "),_("li",[e._v("文件系统中的目录是否支持others用户的"),_("code",{pre:!0},[e._v("w")]),e._v("权限")])])])])]),e._v(" "),_("li",[e._v("本地用户，即Linux中的用户\n"),_("ul",[_("li",[e._v("用户名和密码为Linux用户的用户名和密码")]),e._v(" "),_("li",[e._v("工作目录为Linux用户的家目录")]),e._v(" "),_("li",[e._v("权限为"),_("code",{pre:!0},[e._v("drwx------")])])])]),e._v(" "),_("li",[e._v("虚拟用户，不使用Linux中的用户，防止Linux用户太多难以管理\n"),_("ul",[_("li",[e._v("使用本地用户作为虚拟用户的映射用户")]),e._v(" "),_("li",[e._v("为虚拟用户提供工作目录和权限")]),e._v(" "),_("li",[e._v("每个用户都可以被配置文件设置权限")])])])]),e._v(" "),_("h4",{attrs:{id:"虚拟用户"}},[e._v("虚拟用户")]),e._v(" "),_("ol",[_("li",[e._v("建立虚拟用户数据库文本文件："),_("code",{pre:!0},[e._v("/etc/vsftpd/vsftpd.user")]),e._v(" "),_("ol",[_("li",[e._v("文件格式：奇数行是用户，偶数行是密码")])])]),e._v(" "),_("li",[e._v("转换上述文本文件为数据库文件："),_("code",{pre:!0},[e._v("db_load -T -t hash -f vsftpd.user vsftpd.db")]),e._v(" "),_("ol",[_("li",[_("code",{pre:!0},[e._v("-T")]),e._v("表示把文本文件转换为数据库文件")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-t hash")]),e._v("表示加密类型")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-f <file>")]),e._v("指定源文件")])])]),e._v(" "),_("li",[e._v("修改数据库文件权限："),_("code",{pre:!0},[e._v("chmod 600 vsftpd.db")])]),e._v(" "),_("li",[e._v("创建映射用户："),_("code",{pre:!0},[e._v("useradd -d /var/ftproot -s /sbin/nologin virtual")])]),e._v(" "),_("li",[e._v("修改vsftp的登录认证文件\n"),_("ol",[_("li",[e._v("创建新的登录认证文件"),_("code",{pre:!0},[e._v("cp -a /etc/pam.d/vsftpd /etc/pam.d/vsftpd.pam")])]),e._v(" "),_("li",[e._v("清空"),_("code",{pre:!0},[e._v("vsftpd.pam")]),e._v("的内容，然后添加如下两行\n"),_("ol",[_("li",[_("code",{pre:!0},[e._v("auth    required pam_userdb.so db=/etc/vsftpd/vsftpd")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("account required pam_userdb.so db=/etc/vsftpd/vsftpd")])])])]),e._v(" "),_("li",[e._v("修改主配置文件"),_("code",{pre:!0},[e._v("vsftpd.conf")]),e._v(" "),_("ol",[_("li",[_("code",{pre:!0},[e._v("pam_service_name=vsftpd.pam")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("guest_enable=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("guest_username=virtual")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("user_config_dir=/etc/vsftpd/dir")]),e._v("指定虚拟用户配置文件所在的文件夹")])])])])]),e._v(" "),_("li",[e._v("为每个虚拟用户创建自己的配置文件。配置文件名为虚拟用户名\n"),_("ol",[_("li",[e._v("虚拟用户的配置文件中使用的配置项和匿名用户相同，所以先取消全局配置文件中匿名用户的配置项")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("anon_upload_enable=YES")]),e._v("等")])])])]),e._v(" "),_("h3",{attrs:{id:"交互模式"}},[e._v("交互模式")]),e._v(" "),_("ul",[_("li",[_("code",{pre:!0},[e._v("?")]),e._v("查看帮助")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("ls")]),e._v("列出文件")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("cd")]),e._v("切换目录")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("delete")]),e._v("删除文件。注意不是"),_("code",{pre:!0},[e._v("rm")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("rename")]),e._v("重命名文件。注意不是"),_("code",{pre:!0},[e._v("mv")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("get")]),e._v("/"),_("code",{pre:!0},[e._v("put")]),e._v("下载/上传")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("mget")]),e._v("/"),_("code",{pre:!0},[e._v("mput")]),e._v("多文件下载/上传")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("quit")]),e._v("退出")])]),e._v(" "),_("h3",{attrs:{id:"基于openssl的加密"}},[e._v("基于openssl的加密")]),e._v(" "),_("p",[e._v("防止明文传输")]),e._v(" "),_("h4",{attrs:{id:"openssl概述"}},[e._v("openssl概述")]),e._v(" "),_("p",[e._v("概念：")]),e._v(" "),_("ul",[_("li",[e._v("CA证书服务器\n"),_("ul",[_("li",[e._v("相关文件\n"),_("ul",[_("li",[e._v("密钥（私钥）"),_("code",{pre:!0},[e._v("*.key")])]),e._v(" "),_("li",[e._v("证书（公钥）"),_("code",{pre:!0},[e._v("*.csr")])]),e._v(" "),_("li",[e._v("签字后的证书"),_("code",{pre:!0},[e._v("*.crt")]),e._v(" "),_("ul",[_("li",[e._v("有一定的有效期")]),e._v(" "),_("li",[e._v("有加密类型")]),e._v(" "),_("li",[e._v("有加密长度")])])])])])])])]),e._v(" "),_("p",[e._v("过程：")]),e._v(" "),_("ol",[_("li",[e._v("服务器向CA服务器申请证书（注册）\n"),_("ol",[_("li",[e._v("请求中包括服务器的信息，如公司名、所在地、联系方式等")]),e._v(" "),_("li",[e._v("CA服务器返回\n"),_("ol",[_("li",[e._v("密钥"),_("code",{pre:!0},[e._v("*.key")])]),e._v(" "),_("li",[e._v("签字证书"),_("code",{pre:!0},[e._v("*.crt")])])])])])]),e._v(" "),_("li",[e._v("客户端请求服务器的证书")]),e._v(" "),_("li",[e._v("客户端使用服务器的证书把数据（如用户名和密码）加密然后发给服务器")]),e._v(" "),_("li",[e._v("服务器使用密钥解密得到信息")])]),e._v(" "),_("h4",{attrs:{id:"使用openssl加密vsftp"}},[e._v("使用openssl加密vsftp")]),e._v(" "),_("ol",[_("li",[e._v("查看是否安装了openssl: "),_("code",{pre:!0},[e._v("rpm -q openssl")])]),e._v(" "),_("li",[e._v("查看vsftp是否支持openssl: "),_("code",{pre:!0},[e._v("ldd /usr/sbin/vsftpd | grep libssl")])]),e._v(" "),_("li",[e._v("生成密钥（位于"),_("code",{pre:!0},[e._v("/etc/ssl/certs/")]),e._v("）\n"),_("ol",[_("li",[_("code",{pre:!0},[e._v("openssl genrsa -out vsftpd.key 1024")]),e._v("生成1024位服务器私钥")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("openssl req -new -key vsftpd/key -out vsftpd.csr")]),e._v("生成包含服务器信息的未签名证书")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("openssl x509 -req -days 365 -sha256 -in vsftpd.csr -signkey vsftpd.key -out vsftpd.crt")]),e._v("使用CA服务器签发证书\n"),_("ol",[_("li",[_("code",{pre:!0},[e._v("x509")]),e._v("是颁发格式")])])]),e._v(" "),_("li",[e._v("把"),_("code",{pre:!0},[e._v("/etc/ssl/certs")]),e._v("权限改为"),_("code",{pre:!0},[e._v("500")])])])]),e._v(" "),_("li",[e._v("修改主配置文件"),_("code",{pre:!0},[e._v("/etc/vsftpd/vsftpd.conf")]),e._v(" "),_("ol",[_("li",[_("code",{pre:!0},[e._v("ssl_enable=YES")]),e._v("启动SSL加密")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("ssl_tlsv1=YES")]),e._v("设置支持的TLS版本")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("ssl_tlsv2=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("ssl_tlsv3=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("allow_anon_ssl=YES")]),e._v("匿名用户加密")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("force_anon_logins_ssl=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("force_anon_data_ssl=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("force_local_logins_ssl=YES")]),e._v("本地用户加密")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("force_local_data_ssl=YES")])]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("rsa_cert_file=/etc/ssl/certs/vsftpd.crt")]),e._v("选择证书文件")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("rsa_private_key_file=/etc/ssl/certs/vsftpd.key")])])])]),e._v(" "),_("li",[e._v("重启服务"),_("code",{pre:!0},[e._v("service vsftpd restart")])])]),e._v(" "),_("h2",{attrs:{id:"抓包工具tcpdump"}},[e._v("抓包工具tcpdump")]),e._v(" "),_("p",[e._v("抓包工具："),_("code",{pre:!0},[e._v("tcpdump -i eth0 -nn -X -vv tcp port <port> and ip host <source-ip>")])]),e._v(" "),_("ul",[_("li",[_("code",{pre:!0},[e._v("-i")]),e._v("指定网卡")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-n")]),e._v("以数字方式显示地址而不是主机名")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-nn")]),e._v("除了"),_("code",{pre:!0},[e._v("-n")]),e._v("的作用，把端口也显示为数值而不是服务名")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-X")]),e._v("输出包的header。以16进制和ASCII两种方式同时输出")]),e._v(" "),_("li",[_("code",{pre:!0},[e._v("-vv")]),e._v("二级详细输出")])])])}]};e.exports={attributes:{title:"Linux Network Applications (Part 4)",description:"VSFTP, openssl, tcpdump"},vue:{render:_.render,staticRenderFns:_.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=_.render,this.$options.staticRenderFns=_.staticRenderFns}}}}}}]);